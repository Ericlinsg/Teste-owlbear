<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">

<style>
body {
  margin:0;
  background:#111;
  color:white;
  font-family:Arial;
}

#hud {
  width:140px;
  padding:8px;
  background:#1f1f1f;
  border-radius:8px;
  box-shadow:0 0 10px rgba(0,0,0,.7);
}

#label {
  text-align:center;
  font-size:12px;
  margin-bottom:4px;
}

#barOuter {
  width:100%;
  height:14px;
  background:#333;
  border-radius:6px;
  overflow:hidden;
}

#barInner {
  height:100%;
  width:50%;
  background:linear-gradient(to right,#c00,#0f0);
  transition:.4s;
}

#numbers {
  text-align:center;
  font-size:11px;
  margin-top:3px;
}
</style>
</head>

<body>

<div id="hud">
  <div id="label">HP</div>

  <div id="barOuter">
    <div id="barInner"></div>
  </div>

  <div id="numbers">-- / --</div>
</div>

<script>
const SHEET = "15KcUk2EmTfuEzxtvHK8wNXlcxv5htuh_";
const GID   = "1636579447";

// BG = coluna 59 / BP = 67
// linha começa em 0 → BG6 = row 5 / BP12 = row 11

async function getCell(col, row){
  const url =
   `https://docs.google.com/spreadsheets/d/${SHEET}/gviz/tq?` +
   `gid=${GID}&tqx=out:json&tq=` +
   encodeURIComponent(`select ${col} where row=${row}`);

  const res = await fetch(url);
  const text = await res.text();

  const json = JSON.parse(
    text.substring(text.indexOf("{"), text.lastIndexOf("}")+1)
  );

  return json.table.rows[0]?.c[0]?.v ?? 0;
}

async function refreshHP(){

  const hpNow = await getCell("BG",5);
  const hpMax = await getCell("BP",11);

  const pct = Math.max(0, Math.min(1, hpNow / hpMax));

  document.getElementById("barInner").style.width =
     (pct*100) + "%";

  document.getElementById("numbers").innerText =
     hpNow + " / " + hpMax;
}

// atualiza a cada 5s
refreshHP();
setInterval(refreshHP,5000);

</script>

</body>
</html>
